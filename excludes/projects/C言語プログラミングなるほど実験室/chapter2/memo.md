# 第2章 データ形式に関する実験
## 2-1 半角文字の文字コード
### 2.1.1
半角文字に割り当てられた文字コードを表示するプログラム `charToCode.c` を作成した  
ユーザーの入力された文字の文字コードを表示するシンプルなものだ  
しかしどうも Shift-JIS(Windows 環境！)での動作を前提としているようで、半角カタカナが文字化けし、文字コードも期待していたものとは違ったので、GitHub Copilot Edits + Claude 3.5 Sonnet に直してもらった

iconv を使用して UTF-8 -> Shift-JIS の変換を行い、その文字コードを表示した

### 2.1.2
半角文字の Shift-JIS の一覧表を表示するプログラム。これも日本語が文字化けしてしまった

このプログラムはShift-JIS文字コードの一覧表を表示するC言語のプログラムです。主な機能を説明します：

プログラムの主な機能
1. 文字コード変換機能

- printShiftJISChar 関数を使用して、Shift-JISからUTF-8への文字コード変換を行います
- iconv ライブラリを使用して文字コード変換を実装

2. 表示機能

- 16×16のマトリックス形式で文字を表示
- 各行の先頭に行番号（16進数）を表示
- 表示可能な文字のみを表示（ASCII文字と半角カタカナ）

```
// 表示可能な文字の範囲指定
if ((code >= 0x20 && code <= 0x7E) || (code >= 0xA1 && code <= 0xDF)) {
    printShiftJISChar(code);
} else {
    printf("   ");  // 表示できない文字は空白で埋める
}
```

- 0x20-0x7E: ASCII文字の表示可能な範囲
- 0xA1-0xDF: 半角カタカナの範囲

#### 出力形式
- 16列×16行のマトリックス形式
- 各行の先頭に行番号（16進数）
- ヘッダー行に列番号（0-F）
- 表示できない文字は空白で表示

1. 表形式の視認性維持
- マトリックス形式（16×16）の表を整然と表示するため
- 各文字は3文字分のスペース（" "）で統一
- これにより、列が揃って見やすくなる

2. 制御文字への対応

```c
// 制御文字の例
0x00 // NUL
0x07 // BEL（ベル音）
0x0A // LF（改行）
0x0D // CR（キャリッジリターン）
```

これらの文字をそのまま表示すると、意図しない動作（画面のクリア、ベル音、改行など）が発生する可能性がある

3. 不適切な表示の防止
文字化けや不適切な文字表示を防ぐ
システムによって異なる解釈を防ぐ

#### 空白で埋めない場合の問題点
- 表の列揃えが崩れる
- 文字の位置関係が分かりにくくなる
- どの位置が表示不可能な文字なのか判別できなくなる
