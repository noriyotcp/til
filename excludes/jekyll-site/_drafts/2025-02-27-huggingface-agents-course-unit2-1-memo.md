---
title: "Hugging Face Agents Course Unit2.1 - The smolagents Framework"
date: "2025-02-27 21:45:44 +0900"
last_modified_at: "2025-02-27 21:45:44 +0900"
---

## Hugging Face Agents Course Unit2.1 - The smolagents Framework
https://huggingface.co/learn/agents-course/unit2/introduction

### è¦ç´„
ã“ã®å†…å®¹ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«é–¢ã™ã‚‹ã‚³ãƒ¼ã‚¹ã®æ¦‚è¦ã§ã™ã€‚ã‚³ãƒ¼ã‚¹ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®åŸºæœ¬ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€smolagentsã€LlamaIndexã€LangGraphã®ã‚ˆã†ãªç•°ãªã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å­¦ã³ã€è¤‡é›‘ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’åŠ¹ç‡çš„ã«å‡¦ç†ã™ã‚‹æ–¹æ³•ã‚’æ¢ã‚Šã¾ã™ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®åˆ©ç”¨ãŒå¿…ãšã—ã‚‚å¿…è¦ã§ã¯ãªãã€ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚å¯èƒ½ã§ã‚ã‚‹ã“ã¨ãŒèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ãŒã€è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã«ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒå½¹ç«‹ã¤ã“ã¨ãŒå¼·èª¿ã•ã‚Œã¦ã„ã¾ã™ã€‚

### Introduction to Agentic Frameworks
ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€è»½é‡AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹`smolagents`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½¿ã„æ–¹ã‚’å­¦ã¶ãŸã‚ã®å…¥é–€ã§ã™ã€‚Alfredï¼ˆUnit 1ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰ãŒWayne Manorã§ã®ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼æº–å‚™ã‚’é€šã—ã¦ã€`smolagents`ã‚’ä½¿ã£ãŸæ§˜ã€…ãªã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

**å­¦ç¿’å†…å®¹:**

* `smolagents`ã‚’ä½¿ã†ç†ç”± (LlamaIndex, LangGraphã¨ã®æ¯”è¼ƒ)
* CodeAgents (Pythonã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ)
* ToolCallingAgents (JSON/ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ)
* ãƒ„ãƒ¼ãƒ«ã®ä½œæˆã¨ä½¿ç”¨æ–¹æ³• (Toolã‚¯ãƒ©ã‚¹ã€@toolãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«)
* Retrieval Agents (çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã€RAGãƒ‘ã‚¿ãƒ¼ãƒ³)
* ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã¨ç®¡ç†
* Vision Agents (è¦–è¦šæƒ…å ±å‡¦ç†ã€VLMæ´»ç”¨) ã¨ Browser Agents (Webãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°)

`smolagents`ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„é–¢é€£ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ãƒªãƒ³ã‚¯ã‚‚æä¾›ã•ã‚Œã¾ã™ã€‚è¦ã™ã‚‹ã«ã€`smolagents`ã‚’ä½¿ã£ã¦æ§˜ã€…ãªç¨®é¡ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã—ã€ãƒ„ãƒ¼ãƒ«ã‚„çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã¨é€£æºã•ã›ã€è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚

#### When to Use an Agentic Framework
> LLM ã‚’ä¸­å¿ƒã¨ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹å ´åˆã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯å¿…ãšã—ã‚‚å¿…è¦ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«æŸ”è»Ÿæ€§ã‚’ã‚‚ãŸã‚‰ã—ã€ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã‚’åŠ¹ç‡çš„ã«è§£æ±ºã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ãŒã€å¿…ãšã—ã‚‚å¿…è¦ã¨ã„ã†ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
> 
> å ´åˆã«ã‚ˆã£ã¦ã¯ã€äº‹å‰å®šç¾©ã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã ã‘ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æº€ãŸã™ã“ã¨ãŒã§ãã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯å®Ÿéš›ã«ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ§‹ç¯‰æ–¹æ³•ãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®é€£é–ã®ã‚ˆã†ã«ã‚·ãƒ³ãƒ—ãƒ«ãªå ´åˆã¯ã€ãƒ—ãƒ¬ãƒ¼ãƒ³ã‚³ãƒ¼ãƒ‰ã§ååˆ†ãªå ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ãã®åˆ©ç‚¹ã¯ã€é–‹ç™ºè€…ãŒæŠ½è±¡åŒ–ã™ã‚‹ã“ã¨ãªãã‚·ã‚¹ãƒ†ãƒ ã‚’å®Œå…¨ã«åˆ¶å¾¡ã—ã€ç†è§£ã§ãã‚‹ã“ã¨ã§ã™ã€‚
> 
> ãŸã ã—ã€LLM ã«é–¢æ•°ã‚’å‘¼ã³å‡ºã•ã›ãŸã‚Šã€è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸã‚Šã¨ã„ã£ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒã‚ˆã‚Šè¤‡é›‘ã«ãªã‚‹ã¨ã€ã“ã‚Œã‚‰ã®æŠ½è±¡åŒ–ãŒå½¹ç«‹ã¤ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

#### Agentic Frameworks Units

## Unit 2.1 The smolagents Framework
### Introduction to smolagents
#### Module Overview
#### Contents
##### 1ï¸âƒ£ Why Use smolagents
##### 2ï¸âƒ£ CodeAgents
> CodeAgentsã¯ã€smolagents ã®ä¸»è¦ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ã“ã‚Œã‚‰ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€JSON ã‚„ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆã™ã‚‹ä»£ã‚ã‚Šã«ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ Python ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

##### 3ï¸âƒ£ ToolCallingAgents
> `ToolCallingAgents` ã¯ã€`smolagents`ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ 2ç•ªç›®ã®ã‚¿ã‚¤ãƒ—ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã™ã€‚Python ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ CodeAgents ã¨ã¯ç•°ãªã‚Šã€ã“ã‚Œã‚‰ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€ã‚·ã‚¹ãƒ†ãƒ ãŒã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«è§£æãŠã‚ˆã³è§£é‡ˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ JSON/ãƒ†ã‚­ã‚¹ãƒˆ BLOB ã«ä¾å­˜ã—ã¾ã™ã€‚

##### 4ï¸âƒ£ Tools
> ãƒ¦ãƒ‹ãƒƒãƒˆ 1 ã§èª¬æ˜ã—ãŸã‚ˆã†ã«ã€ãƒ„ãƒ¼ãƒ«ã¯ LLM ãŒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ã‚·ã‚¹ãƒ†ãƒ å†…ã§ä½¿ç”¨ã§ãã‚‹é–¢æ•°ã§ã‚ã‚Šã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œã«ä¸å¯æ¬ ãªæ§‹æˆè¦ç´ ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ã€ãƒ„ãƒ¼ãƒ«ã®ä½œæˆæ–¹æ³•ã€ãã®æ§‹é€ ã€Toolã‚¯ãƒ©ã‚¹ã¾ãŸã¯@toolãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ãŸã•ã¾ã–ã¾ãªå®Ÿè£…æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ„ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¨ãƒ„ãƒ¼ãƒ«ã‚’å…±æœ‰ã™ã‚‹æ–¹æ³•ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒæä¾›ã—ãŸãƒ„ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã‚€æ–¹æ³•ã«ã¤ã„ã¦ã‚‚å­¦ç¿’ã—ã¾ã™ã€‚

##### 5ï¸âƒ£ Retrieval Agents
> æ¤œç´¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ¢ãƒ‡ãƒ«ãŒçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãŸã‚ã€è¤‡æ•°ã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰æƒ…å ±ã‚’æ¤œç´¢ã€çµ±åˆã€å–å¾—ã§ãã¾ã™ã€‚æ¤œç´¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€ãƒ™ã‚¯ã‚¿ãƒ¼ ã‚¹ãƒˆã‚¢ã‚’æ´»ç”¨ã—ã¦åŠ¹ç‡çš„ãªæ¤œç´¢ã‚’è¡Œã„ã€æ¤œç´¢æ‹¡å¼µç”Ÿæˆ (RAG)ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€ãƒ¡ãƒ¢ãƒª ã‚·ã‚¹ãƒ†ãƒ ã‚’é€šã˜ã¦ä¼šè©±ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¶­æŒã—ãªãŒã‚‰ã€Web æ¤œç´¢ã¨ã‚«ã‚¹ã‚¿ãƒ çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã‚’çµ±åˆã™ã‚‹ã®ã«ç‰¹ã«å½¹ç«‹ã¡ã¾ã™ã€‚

##### 6ï¸âƒ£ Multi-Agent Systems
> è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åŠ¹æœçš„ã«ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã“ã¨ã¯ã€å¼·åŠ›ãªãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ä¸Šã§éå¸¸ã«é‡è¦ã§ã™ã€‚Web æ¤œç´¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãªã©ã€ç•°ãªã‚‹æ©Ÿèƒ½ã‚’æŒã¤ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šæ´—ç·´ã•ã‚ŒãŸã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã§ãã¾ã™ã€‚

##### 7ï¸âƒ£ Vision and Browser agents
> ãƒ“ã‚¸ãƒ§ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€ãƒ“ã‚¸ãƒ§ãƒ³è¨€èªãƒ¢ãƒ‡ãƒ« (VLMs Vision-Langauge Models)ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã§å¾“æ¥ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ©Ÿèƒ½ã‚’æ‹¡å¼µã—ã€è¦–è¦šæƒ…å ±ã®å‡¦ç†ã¨è§£é‡ˆã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ã€VLM ã‚’åˆ©ç”¨ã—ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¨­è¨ˆãŠã‚ˆã³çµ±åˆã—ã€ç”»åƒãƒ™ãƒ¼ã‚¹ã®æ¨è«–ã€è¦–è¦šãƒ‡ãƒ¼ã‚¿åˆ†æã€ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãªã©ã®é«˜åº¦ãªæ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹æ–¹æ³•ã‚’æ¢ã‚Šã¾ã™ã€‚ã¾ãŸã€ãƒ“ã‚¸ãƒ§ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã€Web ã‚’é–²è¦§ã—ã¦ãã“ã‹ã‚‰æƒ…å ±ã‚’æŠ½å‡ºã§ãã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

#### Resources

---

### Why use smolagents
#### è¦ç´„
smolagentsã¯ã‚·ãƒ³ãƒ—ãƒ«ãªãŒã‚‰ã‚‚å¼·åŠ›ãªAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ§‹ç¯‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚Hugging Faceãƒ„ãƒ¼ãƒ«ã‚„å¤–éƒ¨APIã¨ã®é€£æºã‚’é€šã˜ã¦ã€LLMãŒæ¤œç´¢ã‚„ç”»åƒç”Ÿæˆã¨ã„ã£ãŸå®Ÿä¸–ç•Œã®æ“ä½œã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

**ä¸»ãªåˆ©ç‚¹:**

* **ã‚·ãƒ³ãƒ—ãƒ«:** ã‚³ãƒ¼ãƒ‰ã®è¤‡é›‘ã•ã¨æŠ½è±¡åŒ–ã‚’æœ€å°é™ã«æŠ‘ãˆã€ç†è§£ã€æ¡ç”¨ã€æ‹¡å¼µãŒå®¹æ˜“ã€‚
* **æŸ”è»ŸãªLLMã‚µãƒãƒ¼ãƒˆ:** Hugging Faceãƒ„ãƒ¼ãƒ«ã¨å¤–éƒ¨APIã¨ã®çµ±åˆã«ã‚ˆã‚Šã€ã‚ã‚‰ã‚†ã‚‹LLMã§å‹•ä½œã€‚
* **ã‚³ãƒ¼ãƒ‰ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:** ã‚³ãƒ¼ãƒ‰ã§ç›´æ¥ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æœ€å„ªå…ˆã§ã‚µãƒãƒ¼ãƒˆã—ã€è§£æã®å¿…è¦æ€§ã‚’ãªãã—ã€ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã‚’ç°¡ç´ åŒ–ã€‚
* **HF Hubçµ±åˆ:** Hugging Face Hubã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆã«ã‚ˆã‚Šã€Gradio Spacesã‚’ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ä½¿ç”¨å¯èƒ½ã€‚

**smolagentsã®ä½¿ç”¨ãŒé©ã—ã¦ã„ã‚‹å ´åˆ:**

* è»½é‡ã§æœ€å°é™ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªå ´åˆã€‚
* è¤‡é›‘ãªè¨­å®šãªã—ã§è¿…é€Ÿã«å®Ÿé¨“ã‚’è¡Œã„ãŸã„å ´åˆã€‚
* ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ãŒå˜ç´”ãªå ´åˆã€‚

**smolagentsã®ç‰¹å¾´:**

* JSONã§ã¯ãªãã‚³ãƒ¼ãƒ‰ã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã€å®Ÿè¡Œãƒ—ãƒ­ã‚»ã‚¹ãŒç°¡ç´ åŒ–ã€‚
* ãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ¡ç”¨ã—ã€ã€Œæ€è€ƒã€â†’ã€Œãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã¨å®Ÿè¡Œã€ã‚’ç¹°ã‚Šè¿”ã™ã€‚
* `@tool`ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§Pythoné–¢æ•°ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ãƒ„ãƒ¼ãƒ«ã‚’å®šç¾©ã€‚
* TransformersModelã€HfApiModelã€LiteLLMModelã€OpenAIServerModelã€AzureOpenAIServerModelãªã©ã€å¤šæ§˜ãªãƒ¢ãƒ‡ãƒ«çµ±åˆã‚’ã‚µãƒãƒ¼ãƒˆã€‚


ã¤ã¾ã‚Šã€ã‚·ãƒ³ãƒ—ãƒ«ã§æŸ”è»Ÿæ€§ãŒé«˜ãã€ã‚³ãƒ¼ãƒ‰ä¸­å¿ƒã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¡ç”¨ã—ãŸAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒsmolagentsã§ã™ã€‚ç‰¹ã«ã€æ‰‹è»½ã«å®Ÿé¨“ã‚’å§‹ã‚ãŸã„å ´åˆã‚„ã€è¤‡é›‘ãªè¨­å®šã‚’é¿ã‘ãŸã„å ´åˆã«æœ€é©ã§ã™ã€‚

#### What is smolagents ?
smolagentsã¯ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ã‚·ãƒ³ãƒ—ãƒ«ã‹ã¤å¼·åŠ›ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹ã€‚ ãƒ¦ãƒ‹ãƒƒãƒˆ1ã§å­¦ã‚“ã ã‚ˆã†ã«ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€LLMã‚’ä½¿ã£ã¦ã€Œè¦³å¯Ÿã€ã«åŸºã¥ã„ã¦ã€Œæ€è€ƒã€ã‚’ç”Ÿæˆã—ã€ã€Œè¡Œå‹•ã€ã‚’å®Ÿè¡Œã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚ ã“ã‚ŒãŒsmolagentsã§ã©ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’æ¢ã£ã¦ã¿ã‚ˆã†ã€‚ 


##### Key Advantages of smolagents
**smolagentsã®ä¸»ãªåˆ©ç‚¹**

- ã‚·ãƒ³ãƒ—ãƒ«ã•ï¼š æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã®è¤‡é›‘ã•ã¨æŠ½è±¡åŒ–ã«ã‚ˆã‚Šã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ç†è§£ã—ã‚„ã™ãã€æ¡ç”¨ã—ã‚„ã™ãã€æ‹¡å¼µã—ã‚„ã™ãã—ã¦ã„ã‚‹ã€‚ 
- æŸ”è»ŸãªLLMã‚µãƒãƒ¼ãƒˆï¼š Hugging Faceãƒ„ãƒ¼ãƒ«ã‚„å¤–éƒ¨APIã¨ã®çµ±åˆã«ã‚ˆã‚Šã€ã©ã®ã‚ˆã†ãªLLMã§ã‚‚å‹•ä½œ
- ã‚³ãƒ¼ãƒ‰ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼š ã‚³ãƒ¼ãƒ‰ã§ç›´æ¥ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã§ã‚µãƒãƒ¼ãƒˆã—ã€è§£æã®å¿…è¦æ€§ã‚’å–ã‚Šé™¤ãã€ãƒ„ãƒ¼ãƒ«ã®å‘¼ã³å‡ºã—ã‚’ç°¡ç´ åŒ–
- HFãƒãƒ–ã®çµ±åˆï¼š Hugging Face Hubã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆã«ã‚ˆã‚Šã€Gradio Spacesã‚’ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

##### When to use smolagents?
ã“ã‚Œã‚‰ã®åˆ©ç‚¹ã‚’å¿µé ­ã«ç½®ã„ã¦ã€ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ãªãsmolagentsã‚’ä½¿ç”¨ã™ã‚‹ã®ã¯ã©ã®ã‚ˆã†ãªå ´åˆã§ã—ã‚‡ã†ã‹ï¼Ÿ 

smolagentsã¯ã€æ¬¡ã®ã‚ˆã†ãªå ´åˆã«ç†æƒ³çš„ã§ã™ã€‚

- è»½é‡ã§æœ€å°é™ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªå ´åˆã€‚
- è¤‡é›‘ãªè¨­å®šã‚’ã›ãšã«ã€è¿…é€Ÿã«å®Ÿé¨“ã‚’è¡Œã„ãŸã„å ´åˆã€‚
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒ­ã‚¸ãƒƒã‚¯ãŒå˜ç´”ãªå ´åˆã€‚

##### Code vs. JSON Actions
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒJSONã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã¯ç•°ãªã‚Šã€smolagentsã¯ã‚³ãƒ¼ãƒ‰ã§ã®ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã€å®Ÿè¡Œãƒ—ãƒ­ã‚»ã‚¹ã‚’ç°¡ç´ åŒ–ã—ã¾ã™ã€‚ ã“ã‚Œã¯ã€ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã™ã‚³ãƒ¼ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãŸã‚ã«JSONã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹å¿…è¦ãŒãªã„ã‹ã‚‰ã§ã™ã€‚

##### Agent Types in smolagents
Agents in smolagents operate as multi-step agents.

Each MultiStepAgent performs:

- One thought
- One tool call and execution

##### Model Integration in smolagents
#### Resources

----

### Building Agents That Use Code

smolagents ã¯Pythonã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’è¨˜è¿°ãƒ»å®Ÿè¡Œã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ§‹ç¯‰ã«ç‰¹åŒ–ã—ãŸè»½é‡ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆç´„1000è¡Œã®ã‚³ãƒ¼ãƒ‰ï¼‰ã§ã€å®‰å…¨ãªã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å®Ÿè¡Œç’°å¢ƒã‚’æä¾›ã—ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€smolagents ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã§ã‚ã‚Šã€åŠ¹ç‡çš„ã§è¡¨ç¾åŠ›è±Šã‹ã§æ­£ç¢ºãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¾ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

**ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®åˆ©ç‚¹:**

* **æ§‹æˆæ€§:** ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®çµ„ã¿åˆã‚ã›ã¨å†åˆ©ç”¨ãŒå®¹æ˜“
* **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†:** ç”»åƒãªã©ã®è¤‡é›‘ãªæ§‹é€ ã‚’ç›´æ¥æ“ä½œå¯èƒ½
* **æ±ç”¨æ€§:** è¨ˆç®—å¯èƒ½ãªã‚¿ã‚¹ã‚¯ã‚’è¡¨ç¾å¯èƒ½
* **LLMã¨ã®è¦ªå’Œæ€§:** é«˜å“è³ªãªã‚³ãƒ¼ãƒ‰ã¯LLMã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«æ—¢ã«å­˜åœ¨

**ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œ:**

ReActãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«åŸºã¥ãã€`CodeAgent.run()`ã§å®Ÿè¡Œã€‚`MultiStepAgent`ã‚’åŸºæœ¬ã¨ã—ã€å®Ÿè¡Œãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã‚‹å¤‰æ•°ã¨çŸ¥è­˜ã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦åˆ©ç”¨ã—ãªãŒã‚‰ã€ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ—ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚

1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ­ã‚°ã‚’LLMãŒèª­ã‚ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¤‰æ›ã€‚
2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ¢ãƒ‡ãƒ«ã«é€ä¿¡ã—ã€ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ç”Ÿæˆã€‚
3. ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’è§£æã—ã€å®Ÿè¡Œã€‚
4. çµæœã‚’å®Ÿè¡Œãƒ­ã‚°ã«è¨˜éŒ²ã€‚
5. å„ã‚¹ãƒ†ãƒƒãƒ—ã®æœ€å¾Œã«ã€`agent.step_callback`ã«å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã‚’å¿…è¦ã«å¿œã˜ã¦å®Ÿè¡Œã€‚

**ã‚³ãƒ¼ãƒ‰ä¾‹:**

ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼æº–å‚™ã‚’ä¾‹ã«ã€DuckDuckGoæ¤œç´¢ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ã€Pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãªã©ã‚’ç”¨ã„ãŸã‚³ãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæˆæ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ä½œæˆã—ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’Hugging Face Hubã§å…±æœ‰ã™ã‚‹æ–¹æ³•ã‚‚ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

**OpenTelemetryã¨Langfuseã«ã‚ˆã‚‹ç›£è¦–:**

OpenTelemetryã¨Langfuseã‚’ç”¨ã„ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡ŒçŠ¶æ³ã‚’ç›£è¦–ãƒ»åˆ†æã™ã‚‹æ–¹æ³•ã‚‚è§£èª¬ã•ã‚Œã¦ã„ã¾ã™ã€‚

**ã¾ã¨ã‚:**

smolagents ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’åŠ¹ç‡çš„ã«å®Ÿè¡Œã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®¹æ˜“ã«æ§‹ç¯‰ã—ã€å…±æœ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã•ã‚‰ã«ã€OpenTelemetryã¨Langfuseã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œã‚’è©³ç´°ã«ç›£è¦–ãƒ»åˆ†æã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

#### Why Code Agents?
ã€Œãªãœã‚³ãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãªã®ã‹ï¼Ÿã€ã¨ã„ã†å•ã„ã«å¯¾ã™ã‚‹å›ç­”ã‚’æ—¥æœ¬èªã«ç¿»è¨³ã—ã¾ã™ã€‚åŸæ–‡ã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã‚’æ‰ãˆãªãŒã‚‰ã€è‡ªç„¶ãªæ—¥æœ¬èªã«ãªã‚‹ã‚ˆã†ã«è¨³ã—ã¾ã™ã€‚


**åŸæ–‡:**

> In a multi-step agent process, the LLM writes and executes actions, typically involving external tool calls. Traditional approaches use a JSON format to specify tool names and arguments as strings, which the system must parse to determine which tool to execute. However, research shows that tool-calling LLMs work more effectively with code directly. This is a core principle of smolagents, as shown in the diagram above from Executable Code Actions Elicit Better LLM Agents. Writing actions in code rather than JSON offers several key advantages: Composability: Easily combine and reuse actions Object Management: Work directly with complex structures like images Generality: Express any computationally possible task Natural for LLMs: High-quality code is already present in LLM training data


**ç¿»è¨³:**

è¤‡æ•°ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã€å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆLLMï¼‰ãŒã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã—å®Ÿè¡Œã—ã¾ã™ãŒã€é€šå¸¸ã¯å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã®å‘¼ã³å‡ºã—ã‚’å«ã¿ã¾ã™ã€‚å¾“æ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ã€ãƒ„ãƒ¼ãƒ«åã¨å¼•æ•°ã‚’æ–‡å­—åˆ—ã¨ã—ã¦JSONå½¢å¼ã§æŒ‡å®šã—ã€ã‚·ã‚¹ãƒ†ãƒ ã¯ãã®JSONã‚’è§£æã—ã¦å®Ÿè¡Œã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã™LLMã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥æ‰±ã†æ–¹ãŒã‚ˆã‚ŠåŠ¹æœçš„ã«å‹•ä½œã™ã‚‹ã“ã¨ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯smolagentsã®ä¸­æ ¸ã¨ãªã‚‹åŸå‰‡ã§ã‚ã‚Šã€ä¸Šã®å›³ï¼ˆExecutable Code Actions Elicit Better LLM Agentsã‚ˆã‚Šï¼‰ã«ã‚‚ç¤ºã•ã‚Œã¦ã„ã‚‹é€šã‚Šã§ã™ã€‚JSONã§ã¯ãªãã‚³ãƒ¼ãƒ‰ã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã«ã¯ã€ã„ãã¤ã‹ã®å¤§ããªåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

* **çµ„ã¿åˆã‚ã›ã‚„ã™ã•:** ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®¹æ˜“ã«çµ„ã¿åˆã‚ã›ãŸã‚Šå†åˆ©ç”¨ã—ãŸã‚Šã§ãã¾ã™ã€‚
* **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†:** ç”»åƒã®ã‚ˆã†ãªè¤‡é›‘ãªæ§‹é€ ã‚’ç›´æ¥æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚
* **æ±ç”¨æ€§:** è¨ˆç®—å¯èƒ½ãªã‚ã‚‰ã‚†ã‚‹ã‚¿ã‚¹ã‚¯ã‚’è¡¨ç¾ã§ãã¾ã™ã€‚
* **LLMã«ã¨ã£ã¦è‡ªç„¶ãªè¡¨ç¾:** é«˜å“è³ªãªã‚³ãƒ¼ãƒ‰ã¯æ—¢ã«LLMã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã«å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚


ã‚ˆã‚Šè‡ªç„¶ã§ç°¡æ½”ãªè¡¨ç¾ã«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ä¾‹ãˆã°ï¼š

è¤‡æ•°ã‚¹ãƒ†ãƒƒãƒ—ã®å‡¦ç†ã‚’è¡Œã†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã¯ã€å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆLLMï¼‰ã¯é€šå¸¸ã€å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã®å‘¼ã³å‡ºã—ã‚’å«ã‚€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ãƒ»å®Ÿè¡Œã—ã¾ã™ã€‚å¾“æ¥ã¯JSONå½¢å¼ã§ãƒ„ãƒ¼ãƒ«åã¨å¼•æ•°ã‚’æŒ‡å®šã—ã¦ã„ã¾ã—ãŸãŒã€ç ”ç©¶ã«ã‚ˆã‚Šã€LLMã¯ã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥æ‰±ã†æ–¹ãŒåŠ¹ç‡çš„ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã¾ã™ã€‚smolagentsã¯ã“ã®ç‚¹ã‚’é‡è¦–ã—ã¦ãŠã‚Šã€ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨˜è¿°ã¯ã€çµ„ã¿åˆã‚ã›ã‚„ã™ã•ã€è¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ç›´æ¥å‡¦ç†ã€ã‚ã‚‰ã‚†ã‚‹è¨ˆç®—ã‚¿ã‚¹ã‚¯ã¸ã®å¯¾å¿œã€ãã—ã¦LLMã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã¨ã®è¦ªå’Œæ€§ã¨ã„ã†åˆ©ç‚¹ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚

#### How Does a Code Agent Work?
ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œåŸç†

ä¸Šè¨˜ã®å›³ã¯ã€ãƒ¦ãƒ‹ãƒƒãƒˆ1ã§èª¬æ˜ã—ãŸReActãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«å¾“ã£ã¦ã€CodeAgent.run() ãŒã©ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚smolagentsã«ãŠã‘ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¸»è¦ãªæŠ½è±¡æ¦‚å¿µã¯ `MultiStepAgent` ã§ã‚ã‚Šã€ã“ã‚Œã¯ä¸­å¿ƒçš„ãªæ§‹æˆè¦ç´ ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚å¾Œè¿°ã®ä¾‹ã§è¦‹ã‚‹ã‚ˆã†ã«ã€CodeAgentã¯MultiStepAgentã®ç‰¹æ®Šãªç¨®é¡ã§ã™ã€‚

CodeAgentã¯ã€æ—¢å­˜ã®å¤‰æ•°ã¨çŸ¥è­˜ãŒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«çµ„ã¿è¾¼ã¾ã‚Œã‚‹ä¸€é€£ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’é€šã—ã¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯å®Ÿè¡Œãƒ­ã‚°ã«ä¿æŒã•ã‚Œã¾ã™ã€‚

1. ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ `SystemPromptStep` ã«æ ¼ç´ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¯ã‚¨ãƒªã¯ `TaskStep` ã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚
2. æ¬¡ã«ã€ä»¥ä¸‹ã®whileãƒ«ãƒ¼ãƒ—ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
   2.1 `agent.write_memory_to_messages()` ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ­ã‚°ã‚’LLMãŒèª­ã‚ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚
   2.2 ã“ã‚Œã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãƒ¢ãƒ‡ãƒ«ã«é€ä¿¡ã•ã‚Œã€ãƒ¢ãƒ‡ãƒ«ã¯è£œå®Œã‚’ç”Ÿæˆã—ã¾ã™ã€‚
   2.3 è£œå®ŒãŒè§£æã•ã‚Œã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒæŠ½å‡ºã•ã‚Œã¾ã™ã€‚CodeAgentã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
   2.4 ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
   2.5 çµæœã¯ActionStepã®ãƒ¡ãƒ¢ãƒªã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚
3. å„ã‚¹ãƒ†ãƒƒãƒ—ã®æœ€å¾Œã«ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ä½•ã‚‰ã‹ã®é–¢æ•°å‘¼ã³å‡ºã—ï¼ˆagent.step_callbackå†…ï¼‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€ãã‚Œã‚‰ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

#### Letâ€™s See Some Examples
Google Colab ã§ [ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯](https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/code_agents.ipynb) ã‚’å®Ÿè¡Œã§ãã‚‹ã‚‰ã—ã„
smolagents ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ [Serverless Inference API](https://huggingface.co/docs/api-inference/index) ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ã€Hugging Face Hub ã«ã‚‚ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹

```python
from huggingface_hub import notebook_login

notebook_login()
```

token ä½œã£ã¦ãŠã„ã¦ã‚³ãƒ”ãƒšã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã€‚
Add token as git credential? ã¯å¿…è¦ãªã‚“ã˜ã‚ƒãªã„ã‹ãªï¼Ÿ No ã§é€²ã‚€

Serverless Inference API ã¨ã¯ï¼š
> Instant Access to thousands of ML Models for Fast Prototyping
> 
> Explore the most popular models for text, image, speech, and more â€” all with a simple API request. Build, test, and experiment without worrying about infrastructure or setup.

[Inference Playground](https://huggingface.co/models?inference=warm&other=conversational&sort=trending) ã‚‚ã‚ã‚‹ã€‚ã“ã“ã§ã•ã¾ã–ã¾ãªãƒ¢ãƒ‡ãƒ«ã‚’è©¦ã™ã“ã¨ãŒã§ãã‚‹

### Selecting a Playlist for the Party Using smolagents
Alfred ãŒéŸ³æ¥½ã®ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã‚’ä½œã£ã¦ãã‚Œã‚‹ã‚‰ã—ã„

### Using a Custom Tool to Prepare the Menu
Menu ã¨ã¯é£Ÿäº‹ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã“ã¨ã‚‰ã—ã„ã€‚ã‚²ã‚¹ãƒˆã®ãŸã‚ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ç”¨æ„ã—ã¦ãã‚Œã‚‹

### Using Python Imports Inside the Agent
> `smolagents`ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ã«ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹åŒ–ã•ã‚ŒãŸå®Ÿè¡Œã‚’æä¾›ã™ã‚‹ã€Python ã‚³ãƒ¼ãƒ‰ ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’è¨˜è¿°ã—ã¦å®Ÿè¡Œã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ç‰¹åŒ–ã—ã¦ã„ã¾ã™ã€‚
> ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œã«ã¯å³æ ¼ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ãŒæ–½ã•ã‚Œã¦ãŠã‚Šã€å®šç¾©æ¸ˆã¿ã®ã‚»ãƒ¼ãƒ• ãƒªã‚¹ãƒˆå¤–ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚ãŸã ã—ã€ `additional_authorized_imports` ã«æ–‡å­—åˆ—ã¨ã—ã¦æ¸¡ã™ã“ã¨ã§ã€è¿½åŠ ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’æ‰¿èªã§ãã¾ã™ã€‚

å‹æ‰‹ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã®ã‚’é˜²ããŸã‚ã«ã€`additional_authorized_imports` ã«è¨±å¯ã™ã‚‹ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã™ã‚‹ã£ã¦ã“ã¨ã‹

> è¦ç´„ã™ã‚‹ã¨ã€smolagents ã¯ Python ã‚³ãƒ¼ãƒ‰ ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’è¨˜è¿°ã—ã¦å®Ÿè¡Œã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ç‰¹åŒ–ã—ã¦ãŠã‚Šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ã«ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹åŒ–ã•ã‚ŒãŸå®Ÿè¡Œã‚’æä¾›ã—ã¾ã™ã€‚ãƒ­ãƒ¼ã‚«ãƒ«è¨€èªãƒ¢ãƒ‡ãƒ«ã¨ API ãƒ™ãƒ¼ã‚¹ã®è¨€èªãƒ¢ãƒ‡ãƒ«ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãŸã‚ã€ã•ã¾ã–ã¾ãªé–‹ç™ºç’°å¢ƒã«é©å¿œã§ãã¾ã™ã€‚

### Sharing Our Custom Party Preparator Agent to the Hub
Interference API ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã« Hugging Face Hub ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹


### Inspecting Our Party Preparator Agent with OpenTelemetry and Langfuse ğŸ“¡
> ã‚¢ãƒ«ãƒ•ãƒ¬ãƒƒãƒ‰ã¯ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼æº–å‚™ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å¾®èª¿æ•´ã™ã‚‹ã†ã¡ã«ã€ãã®ãƒ‡ãƒãƒƒã‚°ã«å«Œæ°—ãŒã•ã—ã¦ããŸã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æœ¬è³ªçš„ã«äºˆæ¸¬ä¸å¯èƒ½ã§ã€æ¤œæŸ»ãŒé›£ã—ã„ã€‚ã—ã‹ã—ã€å½¼ã¯ç©¶æ¥µã®ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼æº–å‚™ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã—ã€æœ¬ç•ªç’°å¢ƒã«é…å‚™ã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ãŸã‚ã€å°†æ¥ã®ç›£è¦–ã¨åˆ†æã®ãŸã‚ã«å¼·å›ºãªãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ãŒå¿…è¦ã§ã™ã€‚

> å†ã³ã€smolagentsãŒæ•‘ã„ã®æ‰‹ã‚’å·®ã—ä¼¸ã¹ã‚‹ï¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡Œã‚’è¨ˆæ¸¬ã™ã‚‹ãŸã‚ã® OpenTelemetry æ¨™æº–ã‚’æ¡ç”¨ã—ã€ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªæ¤œæŸ»ã¨ãƒ­ã‚®ãƒ³ã‚°ã‚’å¯èƒ½ã«ã—ã¦ã„ã¾ã™ã€‚Langfuse ã¨ SmolagentsInstrumentor ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€Alfred ã¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œã‚’ç°¡å˜ã«è¿½è·¡ã—åˆ†æã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

> æ¬¡ã«ã€Alfred ã¯ã™ã§ã« Langfuse ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã€API ã‚­ãƒ¼ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚

ã©ã†ã„ã†ã“ã¨ï¼Ÿ

> Langfuse ã¯ã€å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆLLMï¼‰ã‚’åˆ©ç”¨ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã«ç‰¹åˆ¥ã«è¨­è¨ˆã•ã‚ŒãŸã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®è¦³æ¸¬ãƒ»åˆ†æãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ç§ãŸã¡ã¯ã€é–‹ç™ºè€…ã‚„çµ„ç¹”ãŒ LLM ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰ã‚„æ”¹å–„ã‚’æ”¯æ´ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€é«˜åº¦ãªãƒˆãƒ¬ãƒ¼ã‚¹ï¼†åˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’é€šã˜ã¦ã€ãƒ¢ãƒ‡ãƒ«ã®ã‚³ã‚¹ãƒˆã€å“è³ªã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã«é–¢ã™ã‚‹æ·±ã„æ´å¯Ÿã‚’æä¾›ã—ã¾ã™ã€‚

https://langfuse.com/jp


#### Resources

---

### Writing actions as code snippets or JSON blobs
ã¾ãŸãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ãŒã‚ã‚‹ã‚ˆ

#### How Do Tool Calling Agents Work?
> ä¸»ãªé•ã„ã¯ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®æ§‹é€ åŒ–æ–¹æ³•ã«ã‚ã‚Šã¾ã™ã€‚å®Ÿè¡Œå¯èƒ½ã‚³ãƒ¼ãƒ‰ã®ä»£ã‚ã‚Šã«ã€ãƒ„ãƒ¼ãƒ«åã¨å¼•æ•°ã‚’æŒ‡å®šã™ã‚‹ JSON ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ ã¯ã“ã‚Œã‚‰ã®å‘½ä»¤ã‚’è§£æã—ã¦ã€é©åˆ‡ãªãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã®ãŸã‚ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€ãƒ„ãƒ¼ãƒ«ãŒç†è§£ã§ãã‚‹ã‚ˆã†ãª JSON ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã£ã¦ã“ã¨ã‹

#### Example: Running a Tool Calling Agent
[ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯](https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/tool_calling_agents.ipynb) ã§ã‚‚è©¦ã™ã“ã¨ãŒã§ãã‚‹

> The only difference is the agent type - the framework handles everything else:

ã•ã£ãã¯ Alfred å›ãŒãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã®æº–å‚™ã‚’ã—ã¦ãã‚Œã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã£ã¦ã„ãŸã‘ã©ã€ä»Šåº¦ã¯ã„ã‚ã‚“ãªã“ã¨ã‚’æ±ç”¨çš„ã«å‡¦ç†ã§ãã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ã†ã€‚ãã‚ŒãŒ `ToolCallingAgents` ã ã£ã¦ï½ºï¾„ï¼Ÿ
ã•ã£ãã¯ `CodeAgents` ã«ãƒ„ãƒ¼ãƒ«ã‚’æ¸¡ã—ã¦ã„ãŸãŒã€ãã®åã®é€šã‚Šã® `ToolCallingAgents` ã«æ¸¡ã™ã€‚

> When you examine the agent's trace, instead of seeing Executing parsed code:, you'll see something like:

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Calling tool: 'web_search' with arguments: {'query': "best music recommendations for a party at Wayne's         â”‚
â”‚ mansion"}                                                                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

ã•ã£ãã¯ `Executing parsed code...` ã¨ã„ã† agents ã®å®Ÿè¡Œã®ãƒˆãƒ¬ãƒ¼ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãŸãŒã€ä»Šå›ã¯ã“ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚


> ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€ CodeAgent ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥å®Ÿè¡Œã™ã‚‹ã®ã§ã¯ãªãã€ã‚·ã‚¹ãƒ†ãƒ ãŒå‡¦ç†ã—ã¦å‡ºåŠ›ã‚’ç”Ÿæˆã™ã‚‹æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

> ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã‚’ç†è§£ã§ããŸã®ã§ã€ãƒ‹ãƒ¼ã‚ºã«åˆã£ãŸã‚‚ã®ã‚’é¸æŠã§ãã¾ã™ã€‚smolagentsã‚¢ãƒ«ãƒ•ãƒ¬ãƒƒãƒ‰ã®ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã‚’æˆåŠŸã•ã›ã‚‹ãŸã‚ã«ã€å¼•ãç¶šãæ¢ç´¢ã—ã¦ã¿ã¾ã—ã‚‡ã†! ğŸ‰


#### Resources

---

### Tools
https://huggingface.co/learn/agents-course/unit2/smolagents/tools

ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã¯ã€smolagentsã¨ã„ã†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§LLMï¼ˆå¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼‰ãŒãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

**ä¸»ãªå†…å®¹:**

* **ãƒ„ãƒ¼ãƒ«ã®å®šç¾©æ–¹æ³•:**  ã‚·ãƒ³ãƒ—ãƒ«ãªé–¢æ•°ãƒ™ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«ã«ã¯`@tool`ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã€è¤‡é›‘ãªãƒ„ãƒ¼ãƒ«ã«ã¯`Tool`ã‚¯ãƒ©ã‚¹ã‚’ç¶™æ‰¿ã—ã¾ã™ã€‚ã©ã¡ã‚‰ã®æ–¹æ³•ã‚‚ã€LLMãŒãƒ„ãƒ¼ãƒ«ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«å¿…è¦ãªæƒ…å ±ï¼ˆåå‰ã€èª¬æ˜ã€å…¥åŠ›ãƒ»å‡ºåŠ›ã‚¿ã‚¤ãƒ—ãªã©ï¼‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚å…·ä½“çš„ãªä¾‹ã¨ã—ã¦ã€ã‚±ãƒ¼ã‚¿ãƒªãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹æ¤œç´¢ãƒ„ãƒ¼ãƒ«ã‚„ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ãƒ†ãƒ¼ãƒç”Ÿæˆãƒ„ãƒ¼ãƒ«ãŒæŒ™ã’ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

* **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ„ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹:** smolagentsã«ã¯ã€`PythonInterpreterTool`, `FinalAnswerTool`, `UserInputTool`, `DuckDuckGoSearchTool`, `GoogleSearchTool`, `VisitWebpageTool`ãªã©ã®ã‚ã‚‰ã‹ã˜ã‚ç”¨æ„ã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

* **ãƒ„ãƒ¼ãƒ«ã®å…±æœ‰ã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ:** ä½œæˆã—ãŸã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ã‚’Hugging Face Hubã§å…±æœ‰ã—ãŸã‚Šã€Hubã€HF Spacesã€LangChainã€MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ä½œæˆã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã‚’ç°¡å˜ã«åˆ©ç”¨ã§ãã¾ã™ã€‚  ä¾‹ã¨ã—ã¦ã€ç”»åƒç”Ÿæˆãƒ„ãƒ¼ãƒ«ã‚„ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ³ãƒ¡ãƒ³ãƒˆæ¤œç´¢ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚


è¦ã™ã‚‹ã«ã€smolagentsã¯LLMã‚’æ§˜ã€…ãªãƒ„ãƒ¼ãƒ«ã¨é€£æºã•ã›ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šé«˜åº¦ãªã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚Šã€ãã®ãƒ„ãƒ¼ãƒ«ã®ä½œæˆã€å…±æœ‰ã€åˆ©ç”¨æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã™ã€‚

#### Tool Creation Methods
In smolagents, tools can be defined in two ways:

1. Using the @tool decorator for simple function-based tools
2. Creating a subclass of Tool for more complex functionality

##### The @tool Decorator
Using this approach, we define a function with:

- A clear and descriptive function name that helps the LLM understand its purpose.
- Type hints for both inputs and outputs to ensure proper usage.
- A detailed description, including an Args: section where each argument is explicitly described. These descriptions provide valuable context for the LLM, so itâ€™s important to write them carefully.

###### Generating a tool that retrieves the highest-rated catering
##### Defining a Tool as a Python Class
###### Generating a tool to generate ideas about the superhero-themed party
#### Default Toolbox
#### Sharing and Importing Tools
> ã‚¹ãƒ¢ãƒ«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æœ€ã‚‚å¼·åŠ›ãªæ©Ÿèƒ½ã®1ã¤ã¯ã€ãƒãƒ–ã§ã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ã‚’å…±æœ‰ã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒä½œæˆã—ãŸãƒ„ãƒ¼ãƒ«ã‚’ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«çµ±åˆã§ãã‚‹ã“ã¨ã§ã™ã€‚ã“ã‚Œã«ã¯ã€HF SpacesãŠã‚ˆã³LangChainãƒ„ãƒ¼ãƒ«ã¨ã®æ¥ç¶šãŒå«ã¾ã‚Œã€ã‚¦ã‚§ã‚¤ãƒ³ãƒãƒŠãƒ¼ã§ã®å¿˜ã‚Œã‚‰ã‚Œãªã„ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã‚’æŒ‡æ®ã™ã‚‹ã‚¢ãƒ«ãƒ•ãƒ¬ãƒƒãƒ‰ã®èƒ½åŠ›ãŒå¤§å¹…ã«å‘ä¸Šã—ã¾ã™ã€‚ğŸ­

##### Sharing a Tool to the Hub
##### Importing a Tool from the Hub
##### Importing a Hugging Face Space as a Tool
##### Importing a LangChain Tool
##### Importing a tool collection from any MCP Server
MCP æ¥ã¾ã—ãŸï¼ã“ã‚Œå‰ã¾ã§ã¯ãªã‹ã£ãŸã‚ˆã†ãªæ°—ã‚‚ã™ã‚‹ï¼Ÿ


#### Resources

---

### Retrieval Agents
https://huggingface.co/learn/agents-course/unit2/smolagents/retrieval_agents

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹RAGï¼ˆRetrieval-Augmented Generationï¼‰ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ã¾ã™ã€‚å¾“æ¥ã®RAGã‚·ã‚¹ãƒ†ãƒ ã¯æ¤œç´¢çµæœã«åŸºã¥ã„ã¦LLMãŒå›ç­”ã‚’ç”Ÿæˆã™ã‚‹ã®ã«å¯¾ã—ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹RAGã¯æ¤œç´¢ã¨ç”Ÿæˆã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆã«åˆ¶å¾¡ã™ã‚‹ã“ã¨ã§ã€åŠ¹ç‡ã¨ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

ä¸»ãªãƒã‚¤ãƒ©ã‚¤ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

* **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹RAGã®åˆ©ç‚¹:** å¾“æ¥ã®RAGã‚·ã‚¹ãƒ†ãƒ ã®é™ç•Œï¼ˆå˜ä¸€ã®æ¤œç´¢ã‚¹ãƒ†ãƒƒãƒ—ã€ã‚¯ã‚¨ãƒªã¨ã®ç›´æ¥çš„ãªæ„å‘³çš„é¡ä¼¼æ€§ã«ä¾å­˜ï¼‰ã‚’å…‹æœã—ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè‡ªå¾‹çš„ã«æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã€æ¤œç´¢çµæœã‚’è©•ä¾¡ã€è¤‡æ•°å›ã®æ¤œç´¢ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šé©åˆ‡ã§åŒ…æ‹¬çš„ãªå‡ºåŠ›ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
* **DuckDuckGoã‚’ç”¨ã„ãŸåŸºæœ¬çš„ãªæ¤œç´¢:**  `smolagents`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦ã€DuckDuckGoã§Webæ¤œç´¢ã‚’è¡Œã„ã€æƒ…å ±ã‚’å–å¾—ã—ã¦å›ç­”ã‚’ç”Ÿæˆã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ§‹ç¯‰æ–¹æ³•ã‚’ä¾‹ç¤ºã—ã¦ã„ã¾ã™ã€‚
* **ã‚«ã‚¹ã‚¿ãƒ çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ãƒ„ãƒ¼ãƒ«:** ç‰¹å®šã®ã‚¿ã‚¹ã‚¯å‘ã‘ã«ã€ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ç”¨ã„ãŸã‚«ã‚¹ã‚¿ãƒ çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã—ã¦ã„ã¾ã™ã€‚æ„å‘³æ¤œç´¢ã‚’ç”¨ã„ã¦é–¢é€£æ€§ã®é«˜ã„æƒ…å ±ã‚’å–å¾—ã—ã€äº‹å‰å®šç¾©ã•ã‚ŒãŸçŸ¥è­˜ã¨çµ„ã¿åˆã‚ã›ã¦æ–‡è„ˆã«å¿œã˜ãŸè§£æ±ºç­–ã‚’æä¾›ã—ã¾ã™ã€‚BM25 retrieverã¨RecursiveCharacterTextSplitterã‚’ç”¨ã„ãŸå…·ä½“çš„ãªå®Ÿè£…ä¾‹ã‚‚ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚
* **é«˜åº¦ãªæ¤œç´¢æ©Ÿèƒ½:**  ã‚¯ã‚¨ãƒªå†æ§‹æˆã€è¤‡æ•°ã‚¹ãƒ†ãƒƒãƒ—æ¤œç´¢ã€ã‚½ãƒ¼ã‚¹çµ±åˆã€çµæœæ¤œè¨¼ãªã©ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹RAGã‚·ã‚¹ãƒ†ãƒ ã§åˆ©ç”¨å¯èƒ½ãªé«˜åº¦ãªæ¤œç´¢æˆ¦ç•¥ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚
* **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹RAGã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ã®é‡è¦ãªå´é¢:**  ã‚¯ã‚¨ãƒªã®ç¨®é¡ã¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«åŸºã¥ã„ãŸãƒ„ãƒ¼ãƒ«é¸æŠã€ä¼šè©±å±¥æ­´ã‚’ä¿æŒã™ã‚‹ãŸã‚ã®ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥ã€å–å¾—æƒ…å ±ã®æ¤œè¨¼ã®é‡è¦æ€§ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

è¦ã™ã‚‹ã«ã€ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€`smolagents`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ´»ç”¨ã—ã¦ã€ã‚ˆã‚Šé«˜åº¦ã§æŸ”è»Ÿãªæƒ…å ±æ¤œç´¢ã¨å›ç­”ç”Ÿæˆã‚’å®Ÿç¾ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹RAGã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰æ–¹æ³•ã‚’ã€å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ã¨ã¨ã‚‚ã«è§£èª¬ã—ã¦ã„ã¾ã™ã€‚

#### Basic Retrieval with DuckDuckGo
#### Custom Knowledge Base Tool
#### Enhanced Retrieval Capabilities
#### Resources

### Multi-Agent Systems
https://huggingface.co/learn/agents-course/unit2/smolagents/multi_agent_systems

**1. è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ  (Multi-Agent Systems)**

**è¦ç´„:** ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆMASï¼‰ã®æ¦‚å¿µã‚’å°å…¥ã™ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚  MASã®åŸºæœ¬çš„ãªå®šç¾©ã€åˆ©ç‚¹ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ€§ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã€å …ç‰¢æ€§ãªã©ï¼‰ã€ãã—ã¦æ§˜ã€…ãªã‚¿ã‚¤ãƒ—ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ãã®ç›¸äº’ä½œç”¨ã«ã¤ã„ã¦æ¦‚èª¬ã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚  MASã®é©ç”¨ç¯„å›²ã‚„ã€ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ¯”è¼ƒãªã©ã‚‚å«ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

---

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ  (MAS) ã‚’ç”¨ã„ãŸè¤‡é›‘ãªã‚¿ã‚¹ã‚¯è§£æ±ºã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€æ˜ ç”»ã®æ’®å½±å ´æ‰€ã¨ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚«ãƒ¼å·¥å ´ã®ä½ç½®ã‚’ç‰¹å®šã—ã€ã‚´ãƒƒã‚µãƒ ã‹ã‚‰ã®è¼¸é€æ™‚é–“ã‚’è¨ˆç®—ã—ã¦åœ°å›³ä¸Šã«è¡¨ç¤ºã™ã‚‹ä¾‹ã‚’è©³ç´°ã«ç¤ºã—ã¦ã„ã¾ã™ã€‚

**ãƒã‚¤ãƒ©ã‚¤ãƒˆ:**

* **MASã®åˆ©ç‚¹:** ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ€§ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã€å …ç‰¢æ€§ã®å‘ä¸Šã€‚è¤‡æ•°ã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå”åŠ›ã—ã¦è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’å‡¦ç†ã—ã¾ã™ã€‚
* **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å½¹å‰²:** ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã‚¿ã‚¹ã‚¯ã‚’å§”ä»»ã—ã€ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã€ã‚¦ã‚§ãƒ–æ¤œç´¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
* **ä¾‹é¡Œ:** ãƒãƒƒãƒˆãƒãƒ³ã®æ’®å½±å ´æ‰€ã¨ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚«ãƒ¼å·¥å ´ã®ä½ç½®ã‚’ç‰¹å®šã—ã€ã‚´ãƒƒã‚µãƒ ã‹ã‚‰ã®èˆªç©ºè¼¸é€æ™‚é–“ã‚’è¨ˆç®—ã€åœ°å›³ä¸Šã«è¡¨ç¤ºã™ã‚‹ã€‚
* **ã‚³ãƒ¼ãƒ‰ä¾‹:** `smolagents`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ãŸPythonã‚³ãƒ¼ãƒ‰ãŒç¤ºã•ã‚Œã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ§‹ç¯‰ã€ã‚¿ã‚¹ã‚¯ã®å§”è­²ã€çµæœã®è¡¨ç¤ºæ–¹æ³•ãŒèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
* **å˜ä¸€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ vs. è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:** è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å°‚é–€æ€§ã‚’é«˜ã‚ã€å‡¦ç†é€Ÿåº¦ã¨ã‚³ã‚¹ãƒˆã®å‰Šæ¸›ã‚’å®Ÿç¾ã—ã¾ã™ã€‚
* **çµæœ:** åœ°å›³ä¸Šã«ã€å ´æ‰€ã¨ã‚´ãƒƒã‚µãƒ ã‹ã‚‰ã®è¼¸é€æ™‚é–“ãŒè‰²åˆ†ã‘ã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

è¦ç´„ã™ã‚‹ã¨ã€ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€è¤‡é›‘ãªå•é¡Œã‚’åŠ¹ç‡çš„ã«è§£æ±ºã™ã‚‹ãŸã‚ã®è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆã¨å®Ÿè£…æ–¹æ³•ã‚’ç¤ºã™ã€å®Ÿè·µçš„ãªãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¨ãªã£ã¦ã„ã¾ã™ã€‚`smolagents`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ãŸå…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ã¨ã€è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚¿ã‚¹ã‚¯åˆ†å‰²ã®ãƒ¡ãƒªãƒƒãƒˆãŒå¼·èª¿ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

#### Multi-Agent Systems in Action
**2. è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè·µ (Multi-Agent Systems in Action)**

**è¦ç´„:**  ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€å…·ä½“çš„ãªä¾‹ã‚’ç”¨ã„ã¦MASã®å‹•ä½œã‚’ç¤ºã™ã§ã—ã‚‡ã†ã€‚  æ§˜ã€…ãªã‚¿ã‚¹ã‚¯ã‚’è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã©ã®ã‚ˆã†ã«å”åŠ›ã—ã¦å®Ÿè¡Œã™ã‚‹ã‹ã‚’èª¬æ˜ã—ã€MASã®åˆ©ç‚¹ã‚’ã‚ˆã‚Šå…·ä½“çš„ã«ç¤ºã™ãŸã‚ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚  å…·ä½“çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚„ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®é€šä¿¡æ–¹æ³•ã«ã¤ã„ã¦ã‚‚è§¦ã‚Œã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

#### Solving a complex task with a multi-agent hierarchy
**3. è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆéšå±¤ã‚’ç”¨ã„ãŸè¤‡é›‘ãªã‚¿ã‚¹ã‚¯è§£æ±º (Solving a complex task with a multi-agent hierarchy)**

**è¦ç´„:**  ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€MASã‚’ç”¨ã„ã¦è¤‡é›‘ãªå•é¡Œã‚’è§£æ±ºã™ã‚‹æ–¹æ³•ã‚’ã€å…·ä½“çš„ãªä¾‹ã‚’é€šã—ã¦èª¬æ˜ã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚  è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’éšå±¤çš„ã«æ§‹æˆã™ã‚‹ã“ã¨ã§ã€è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’åŠ¹ç‡çš„ã«åˆ†å‰²ãƒ»å‡¦ç†ã™ã‚‹æ‰‹æ³•ãŒç¤ºã•ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚  ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®é€£æºã€æƒ…å ±å…±æœ‰ã€æ„æ€æ±ºå®šãƒ—ãƒ­ã‚»ã‚¹ãªã©ãŒè©³ç´°ã«è§£èª¬ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

##### We first make a tool to get the cargo plane transfer time.
**4. è²¨ç‰©è¼¸é€æ™‚é–“ã®ç®—å‡ºãƒ„ãƒ¼ãƒ«ä½œæˆ (We first make a tool to get the cargo plane transfer time.)**

**è¦ç´„:**  ã“ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ã‚ˆã‚Šå¤§ããªã‚¿ã‚¹ã‚¯ã®ä¸€éƒ¨ã¨ã—ã¦ã€ç‰¹å®šã®æ©Ÿèƒ½ï¼ˆã“ã®å ´åˆã¯è²¨ç‰©è¼¸é€æ™‚é–“ã®ç®—å‡ºï¼‰ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã®ä½œæˆéç¨‹ã‚’ç¤ºã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚  ãƒ„ãƒ¼ãƒ«é–‹ç™ºã®å…·ä½“çš„ãªæ‰‹é †ã€ä½¿ç”¨ã—ãŸæŠ€è¡“ã€ãã—ã¦ãã®ãƒ„ãƒ¼ãƒ«ãŒå…¨ä½“ã®ã‚·ã‚¹ãƒ†ãƒ ã«ã©ã®ã‚ˆã†ã«çµ±åˆã•ã‚Œã‚‹ã‹ãŒèª¬æ˜ã•ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚  ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€å¾Œç¶šã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã£ã¦åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒäºˆæƒ³ã•ã‚Œã¾ã™ã€‚

##### Setting up the agent
**5. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¨­å®š (Setting up the agent)**

**è¦ç´„:**  ã“ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€MASã‚’æ§‹æˆã™ã‚‹å€‹ã€…ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¨­å®šæ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚  ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å½¹å‰²ã€ä½¿ç”¨ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šã€ãã—ã¦ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®é€£æºæ–¹æ³•ãªã©ãŒè©³ç´°ã«è¨˜è¿°ã•ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚  ç‰¹å®šã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç¨®é¡ã€ãã®æ§‹æˆè¦ç´ ã€ãã—ã¦ãã®å‹•ä½œãŒèª¬æ˜ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

##### âœŒï¸ Splitting the task between two agents
**6. 2ã¤ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã§ã®ã‚¿ã‚¹ã‚¯åˆ†å‰² (âœŒï¸ Splitting the task between two agents)**

**è¦ç´„:**  ã“ã®ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«åŠ¹æœçš„ã«åˆ†å‰²ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚  2ã¤ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã©ã®ã‚ˆã†ãªå½¹å‰²ã‚’æ‹…ã„ã€ã©ã®ã‚ˆã†ã«å”èª¿ã—ã¦ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã•ã›ã‚‹ã‹ã‚’è§£èª¬ã™ã‚‹ã§ã—ã‚‡ã†ã€‚  ã‚¿ã‚¹ã‚¯åˆ†å‰²ã®æˆ¦ç•¥ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®é€šä¿¡æ–¹æ³•ã€ãã—ã¦ã‚¿ã‚¹ã‚¯ã®å®Œäº†åˆ¤å®šãªã©ã«ã¤ã„ã¦è©³ç´°ãªèª¬æ˜ãŒã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

#### Resources

### Vision Agents with smolagents
https://huggingface.co/learn/agents-course/unit2/smolagents/vision_agents

smolagentsã‚’ä½¿ã£ã¦ã€è¦–è¦šæ©Ÿèƒ½ã‚’æŒã¤ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã—ãŸå†…å®¹ã§ã™ã€‚

**ä¸»ãªãƒã‚¤ãƒ³ãƒˆ:**

* **è¦–è¦šè¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆVLMï¼‰ã¨ã®é€£æº:**  å¼·åŠ›ãªVLMï¼ˆä¾‹ï¼šGPT-4oï¼‰ã¨smolagentsã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ç”»åƒã‚’å‡¦ç†ãƒ»è§£é‡ˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
* **ç”»åƒã®å…¥åŠ›æ–¹æ³•:**  ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ç”»åƒå…¥åŠ›ã¯ã€å®Ÿè¡Œé–‹å§‹æ™‚ã«`task_images`ã¨ã—ã¦æ¸¡ã™æ–¹æ³•ã¨ã€å®Ÿè¡Œä¸­ã«å‹•çš„ã«å–å¾—ãƒ»è¿½åŠ ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚
* **å‹•çš„ç”»åƒå–å¾—ã®ä»•çµ„ã¿:**  `MultiStepAgent`ã‚¯ãƒ©ã‚¹ï¼ˆReActãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«åŸºã¥ãï¼‰ã®å„ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆ`SystemPromptStep`ã€`TaskStep`ã€`ActionStep`ï¼‰ã§ç”»åƒã‚„æƒ…å ±ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã—ã€å‹•çš„ã«å‡¦ç†ã—ã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ä¸­ã«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’`observation_images`ã¨ã—ã¦`ActionStep`ã«ä¿å­˜ã§ãã¾ã™ã€‚
* **ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ§‹ç¯‰:** Seleniumã¨Heliumã‚’ä½¿ç”¨ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è‡ªå‹•åŒ–ã—ã€`search_item_ctrl_f`ã€`go_back`ã€`close_popups`ãªã©ã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æä¾›ã™ã‚‹ã“ã¨ã§ã€Webãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚`save_screenshot`é–¢æ•°ã§å„ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä¿å­˜ã—ã¾ã™ã€‚
* **DuckDuckGoæ¤œç´¢ãƒ„ãƒ¼ãƒ«:**  `DuckDuckGoSearchTool`ã‚’ä½¿ã£ã¦Webæ¤œç´¢ã‚’è¡Œã„ã€ç”»åƒã‚„æƒ…å ±ã‚’å–å¾—ã§ãã¾ã™ã€‚
* **ä¾‹ï¼šãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã®ã‚²ã‚¹ãƒˆç¢ºèª:**  Wonder Womanã®ã‚ˆã†ã«ã€ã‚²ã‚¹ãƒˆã®èº«å…ƒã‚’ç”»åƒæ¤œç´¢ã‚„Wikipediaã®æƒ…å ±ã«åŸºã¥ã„ã¦ç¢ºèªã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¾‹ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚`helium_instructions`ã‚’ä½¿ã£ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚

**è¦ç´„:**

ã“ã®è¨˜äº‹ã§ã¯ã€smolagentsã‚’ç”¨ã„ã¦ã€ç”»åƒã‚’ç†è§£ã—Webãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã‚‚å¯èƒ½ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’ã€å…·ä½“çš„ãªä¾‹ã‚’äº¤ãˆã¦è§£èª¬ã—ã¦ã„ã¾ã™ã€‚  å‹•çš„ãªç”»åƒå‡¦ç†ã‚„ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«ã¨ã®é€£æºã«ã‚ˆã‚Šã€è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’ã“ãªã›ã‚‹å¼·åŠ›ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

#### Providing Images at the Start of the Agentâ€™s Execution
#### Providing Images with Dynamic Retrieval
#### Further Reading

### Unit2 smolagents quiz
https://huggingface.co/spaces/agents-course/unit2_smolagents_quiz


Code Review Complete! ğŸ“š

This feedback should help you improve your skills.

â›”ï¸ The feedback uses Qwen/Qwen2.5-Coder-32B-Instruct to compare your response to a gold standard solution. As we know, LLMs are not perfect. You should compare your work against the assessment criteria if you doubt the feedback.

Here's your detailed feedback:### Question 1: Create a Basic Code Agent with Web Search Capability

#### Question 1: Create a Basic Code Agent with Web Search Capability
Your Solution:

```python
# Create a CodeAgent with DuckDuckGo search capability

from smolagents import CodeAgent, DuckDuckGoSearchTool, HfApiModel

model = HfApiModel(model_id="Qwen/Qwen2.5-Coder-32B-Instruct", provider="together")
agent = CodeAgent(
    tools=[DuckDuckGoSearchTool()],  # Add search tool here
    model=model,  # Add model here
)
```

Reference Solution:

```python
from smolagents import CodeAgent, DuckDuckGoSearchTool, HfApiModel

agent = CodeAgent(
    tools=[DuckDuckGoSearchTool()],
    model=HfApiModel("Qwen/Qwen2.5-Coder-32B-Instruct")
)
```

##### Assessment Criteria:
- Correct imports are included
- DuckDuckGoSearchTool is added to tools list
- HfApiModel is properly configured
- Model ID is correctly specified

##### Feedback:
Overall Assessment
The student's solution meets all the assessment criteria and demonstrates a good understanding of the task. Here is a detailed breakdown of the feedback for each criterion:

##### Correct imports are included
âœ… The student correctly imported the necessary modules from the smolagents package.

##### DuckDuckGoSearchTool is added to tools list
âœ… The student successfully added the DuckDuckGoSearchTool to the tools list in the CodeAgent initialization.

##### HfApiModel is properly configured
âœ… The student properly configured the HfApiModel with the model_id and provider parameters.

##### Model ID is correctly specified
âœ… The student correctly specified the model ID as 'Qwen/Qwen2.5-Coder-32B-Instruct'.

#### Question 2: Set Up a Multi-Agent System with Manager and Web Search Agents
Your Solution:

```python
# Create web agent and manager agent structure
from smolagents import CodeAgent, GoogleSearchTool, HfApiModel

model = HfApiModel(
    model_id="Qwen/Qwen2.5-Coder-32B-Instruct", provider="together", max_tokens=8096
)

web_agent = ToolCallingAgent(
    tools=[GoogleSearchTool("serper")],  # Add required tools
    model=model,  # Add model
    max_steps=10,  # Adjust steps
    name="web_agent",  # Add name
    description="Browses the web to find infomation",  # Add description
)

manager_agent = CodeAgent()
```

Reference Solution:

```python
web_agent = ToolCallingAgent(
    tools=[DuckDuckGoSearchTool(), visit_webpage],
    model=model,
    max_steps=10,
    name="search",
    description="Runs web searches for you."
)

manager_agent = CodeAgent(
    tools=[],
    model=model,
    managed_agents=[web_agent],
    additional_authorized_imports=["time", "numpy", "pandas"]
)
```

##### Assessment Criteria:
- Web agent has correct tools configured
- Manager agent properly references web agent
- Appropriate max_steps value is set
- Required imports are authorized

##### Feedback:
Overall Assessment

The student's solution is a good start but has some issues that need to be addressed to fully meet the assessment criteria.

Web agent has correct tools configured
âŒ The student used GoogleSearchTool instead of DuckDuckGoSearchTool and visit_webpage. The correct tools should be configured as per the reference solution.

Manager agent properly references web agent
âŒ The manager agent is not properly configured to manage the web agent. The managed_agents parameter is missing in the manager agent's initialization.

Appropriate max_steps value is set
âœ… The student set the max_steps value to 10, which is the same as the reference solution.

Required imports are authorized
âŒ The student did not authorize the required imports (time, numpy, pandas) in the manager agent's initialization.

#### Question 3: Configure Agent Security Settings
Your Solution:

```python
# Set up secure code execution environment
from smolagents import CodeAgent, DuckDuckGoSearchTool, HfApiModel

model = HfApiModel()

agent = CodeAgent(tools=[DuckDuckGoSearchTool()], model=model, executor_type="e2b")
```

Reference Solution:

```python
from smolagents import CodeAgent, E2BSandbox

agent = CodeAgent(
    tools=[],
    model=model,
    sandbox=E2BSandbox(),
    additional_authorized_imports=["numpy"]
)
```

##### Assessment Criteria:
- E2B sandbox is properly configured
- Authorized imports are appropriately limited
- Security settings are correctly implemented
- Basic agent configuration is maintained

##### Feedback:
Overall Assessment
The student's solution has some strengths and areas for improvement. Let's break down the feedback based on the assessment criteria.

#### Question 4: Implement a Tool-Calling Agent
Your Solution:

```python
# Create a tool-calling agent
from smolagents import ToolCallingAgent, DuckDuckGoSearchTool, HfApiModel

agent = ToolCallingAgent(
    # Add configuration here
    tools=[DuckDuckGoSearchTool()],
    model=HfApiModel(),
    name="tool_calling_agent",
    description="This is the tool-calling agent",
)
```

Reference Solution:

```python
from smolagents import ToolCallingAgent

agent = ToolCallingAgent(
    tools=[custom_tool],
    model=model,
    max_steps=5,
    name="tool_agent",
    description="Executes specific tools based on input"
)
```

##### Assessment Criteria:
- Tools are properly configured
- Step limit is set appropriately
- Agent name and description are provided
- Basic configuration is complete

##### Feedback:
Overall Assessment
The student's solution meets the basic configuration requirements for the tool-calling agent. However, there are a few areas for improvement.

Tools are properly configured
âœ… The student has used DuckDuckGoSearchTool, which is a valid tool. However, the reference solution uses a custom tool, which might be more specific to the task. The student's choice is acceptable as long as DuckDuckGoSearchTool is appropriate for the task.

Step limit is set appropriately
âŒ The student's solution does not include a step limit, which is a crucial part of the configuration. The reference solution sets max_steps to 5, which is a reasonable default. The student should include this parameter in their configuration.

Agent name and description are provided
âœ… The student has provided a name and description for the agent, which meets the requirement. However, the description could be more detailed to better reflect the agent's purpose.

Basic configuration is complete
âŒ While the student has provided most of the necessary configuration, the missing step limit prevents the configuration from being considered complete.

#### Question 5: Set Up Model Integration
Your Solution:

```python
# Configure model integration
from smolagents import HfApiModel

model = HfApiModel(
    model_id="Qwen/Qwen2.5-Coder-32B-Instruct", provider="together"
)  # Add model configuration
```
Reference Solution:

```python
from smolagents import HfApiModel, LiteLLMModel

# Hugging Face model
hf_model = HfApiModel("Qwen/Qwen2.5-Coder-32B-Instruct")

# Alternative model via LiteLLM
other_model = LiteLLMModel("anthropic/claude-3-sonnet")
```

##### Assessment Criteria:
- Correct model imports are included
- Model is properly initialized
- Model ID is correctly specified
- Alternative model option is provided
